"use strict";(self["webpackChunktoutiao_mobile"]=self["webpackChunktoutiao_mobile"]||[]).push([[28],{7028:function(t,a,s){s.r(a),s.d(a,{default:function(){return g}});var i=function(){var t=this,a=t._self._c;return a("div",[a("van-nav-bar",{attrs:{title:"文章详情",fixed:"",placeholder:"","left-arrow":""},on:{"click-left":function(a){return t.$router.go(-1)}}}),a("h2",{staticClass:"title"},[t._v(t._s(t.detail.title))]),a("div",{staticClass:"author-box"},[a("van-image",{attrs:{fit:"cover",round:"",src:t.detail.aut_photo}}),a("div",{staticClass:"info-box"},[a("div",[t._v(t._s(t.detail.aut_name))]),a("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(t.detail.pubdate)))])]),a("van-button",{attrs:{round:"",type:"info"}},[t._v("+关注")])],1),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.detail.content)}}),a("van-divider",[t._v("end")]),a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("van-button",{attrs:{plain:"",round:"",icon:"passed",type:"primary"}},[t._v("喜欢"+t._s(t.detail.link_count))]),a("van-button",{attrs:{plain:"",round:"",icon:"close",type:"danger"}},[t._v("不喜欢")])],1),a("Comment")],1)},e=[],n=s(5198),o=function(){var t=this,a=t._self._c;return a("div",[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.list,(function(s){return a("van-cell",{key:s.com_id},[a("div",{staticClass:"cmt-box"},[a("van-image",{attrs:{fit:"cover",round:"",src:s.aut_photo}}),a("div",{staticClass:"info-box"},[a("div",{staticClass:"name"},[t._v(t._s(s.aut_name))]),a("div",{staticClass:"content"},[t._v(t._s(s.content))]),a("div",{staticClass:"bottom-box"},[a("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(s.pubdate)))]),a("van-button",{attrs:{size:"mini"},on:{click:function(a){return t.doReply(s)}}},[t._v("回复（"+t._s(s.reply_count)+"）")])],1)]),a("van-icon",{attrs:{name:"like-o"}})],1)])})),1),a("div",{staticClass:"send-box"},[a("van-field",{attrs:{center:"",clearable:"",placeholder:"说说你的看法吧"},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"info"},on:{click:t.submit}},[t._v("发布")])]},proxy:!0}]),model:{value:t.content,callback:function(a){t.content="string"===typeof a?a.trim():a},expression:"content"}})],1),a("van-action-sheet",{attrs:{title:"回复列表"},model:{value:t.replyShow,callback:function(a){t.replyShow=a},expression:"replyShow"}},[t.replyShow?a("reply",{attrs:{cmt:t.cmt}}):t._e()],1)],1)},l=[],c=function(){var t=this,a=t._self._c;return a("div",[a("van-cell",[a("div",{staticClass:"cmt-box"},[a("van-image",{attrs:{fit:"cover",round:"",src:t.cmt.aut_photo}}),a("div",{staticClass:"info-box"},[a("div",{staticClass:"name"},[t._v(t._s(t.cmt.aut_name))]),a("div",{staticClass:"content"},[t._v(t._s(t.cmt.content))]),a("div",{staticClass:"bottom-box"},[a("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(t.cmt.pubdate)))])])])],1)]),a("van-divider",[t._v("我的回复")]),a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.list,(function(s){return a("van-cell",{key:s.com_id},[a("div",{staticClass:"cmt-box"},[a("van-image",{attrs:{fit:"cover",round:"",src:s.aut_photo}}),a("div",{staticClass:"info-box"},[a("div",{staticClass:"name"},[t._v(t._s(s.aut_name))]),a("div",{staticClass:"content"},[t._v(t._s(s.content))]),a("div",{staticClass:"bottom-box"},[a("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(s.pubdate)))])])])],1)])})),1),a("div",{staticClass:"send-box"},[a("van-field",{attrs:{center:"",clearable:"",placeholder:"发表你的观点"},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.send.apply(null,arguments)}},scopedSlots:t._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"info"},on:{click:t.send}},[t._v("发布")])]},proxy:!0}]),model:{value:t.msg,callback:function(a){t.msg=a},expression:"msg"}})],1)],1)},d=[],r={props:["cmt"],data(){return{list:[],loading:!1,finished:!1,offset:null,msg:"",replyShow:!0}},methods:{async onLoad(){const t=await(0,n.al)({type:"c",source:this.cmt.com_id,offset:this.offset});this.list.push(...t.data.data.results),this.offset=t.data.data.last_id,this.loading=!1,t.data.data.end_id===t.data.data.last_id&&(this.finished=!0)},async send(){if(""===this.msg)return this.$toast("请输入点评论内容");const t=await(0,n.BV)({target:this.cmt.com_id,content:this.msg,art_id:this.$route.query.id});this.list.unshift(t.data.data.new_obj),this.msg="",this.$toast.success("评论成功！")}}},u=r,v=s(1001),f=(0,v.Z)(u,c,d,!1,null,"9a7a164a",null),_=f.exports,m={data(){return{list:[],loading:!1,finished:!1,offset:null,content:"",replyShow:!1,cmt:{}}},components:{Reply:_},methods:{async onLoad(){const t=await(0,n.al)({type:"a",source:this.$route.query.id,offset:this.offset,limit:"1"});this.list.push(...t.data.data.results),this.offset=t.data.data.last_id,this.loading=!1,t.data.data.end_id===t.data.data.last_id&&(this.finished=!0)},async submit(){if(""!==this.content){const t=await(0,n.BV)({target:this.$route.query.id,content:this.content});this.$toast.success("ok"),this.content="",this.list.unshift(t.data.data.new_obj)}else this.$toast.fail("请输入评论内容")},doReply(t){this.cmt=t,this.replyShow=!0}}},h=m,p=(0,v.Z)(h,o,l,!1,null,"f4372d9e",null),y=p.exports,b={data(){return{detail:{}}},async created(){const t=await(0,n.qK)(this.$route.query.id);this.detail=t.data.data},components:{Comment:y}},C=b,x=(0,v.Z)(C,i,e,!1,null,"77dc530c",null),g=x.exports}}]);